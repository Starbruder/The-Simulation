<Window x:Class="TheSimulation.SimulationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TheSimulation"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        d:DataContext="{d:DesignInstance Type=local:SimulationLiveStats}"
        mc:Ignorable="d"
        Title="Forest fire simulation"
        Height="700"
        Width="1000"
        ResizeMode="NoResize"
        KeyDown="Window_KeyDown">

	<Window.Resources>
		<!-- Style für Buttons -->
		<Style x:Key="CustomButtonStyle" TargetType="Button">
			<Setter Property="Background" Value="#FF4C8F94"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Padding" Value="5,0"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="HorizontalAlignment" Value="Center"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="Effect">
				<Setter.Value>
					<DropShadowEffect Color="Black" Direction="315" ShadowDepth="5" Opacity="0.3" BlurRadius="8"/>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Grid Grid.Row="0" Background="#222">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>

			<!-- Steuerleiste oben -->
		<StackPanel Orientation="Horizontal"
            Background="#222"
            Grid.Row="0">

			<!-- Geschwindigkeit -->
			<Button x:Name="PauseResumeButton"
                Content="❚❚"
                Margin="16,0,0,0"
                VerticalAlignment="Center"
                ToolTip="Pauses / Resumes the simulation (Space)"
                Click="PauseResume_Click" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedSlowButton"
                ToolTip="Sets the simulation speed to half the normal speed (0,5x)"
                Content="0,5"
                Click="SpeedSlow_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedNormalButton"
                ToolTip="Sets the simulation speed to normal speed (1x)"
                Content="×1"
                Click="SpeedNormal_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedFastButton"
                ToolTip="Sets the simulation speed to double the normal speed (2x)"
                Content="×2"
                Click="SpeedFast_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedUltraButton"
                ToolTip="Sets the simulation speed to ultra speed (40x the normal speed)"
                Content="×40"
                Click="SpeedUltra_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<!-- Abstand -->
			<Rectangle Width="10"/>

			<TextBlock Text="Total Grown:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="16,0,0,0"/>
			<TextBlock Text="{Binding TotalGrownDisplay}"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="5,0,0,0" MinWidth="32"/>

			<TextBlock Text="Total Burned:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="8,0,0,0"/>
			<TextBlock Text="{Binding TotalBurnedDisplay}"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="5,0,0,0" MinWidth="32"/>

			<TextBlock Text="Tree-Density:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="8,0,0,0"/>
			<TextBlock Text="{Binding TreeDensityDisplay}"
                Foreground="White"
                VerticalAlignment="Center"
                Margin="16,0,0,0"/>

			<!-- Windstärke Anzeige -->
			<TextBlock Text="Wind Strength:"
                       Foreground="White"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0"/>
			<TextBlock Text="{Binding WindDisplay}"
                    Foreground="White"
                    VerticalAlignment="Center"
                    Margin="5,0,0,0" MinWidth="32"/>

			<Button x:Name="ShowEvaluationButton"
                Content="Evaluation"
                Grid.Column="2"
                IsEnabled="False"
                Margin="16,0,0,0"
                VerticalAlignment="Center"
                ToolTip="Opens a new window to show the result of this simulation"
                Click="ShowEvaluation_Click" Style="{StaticResource CustomButtonStyle}"/>
		</StackPanel>

			<TextBlock x:Name="SimulationTimeText"
                       Grid.Column="1"
                       Text="{Binding SimulationTime,
                       StringFormat='Runtime: \{0\}',
                       FallbackValue='Runtime: 00:00:00'}"
                       Foreground="White"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Right"
                       Margin="0,0,16,0"/>
		</Grid>

	    <!-- Canvas + Overlay -->
	    <Grid Grid.Row="1">
		    <!-- Main Canvas -->
			<Canvas x:Name="ForestCanvas"
                Background="Black"
                Cursor="Cross"/>

			<!-- Edit Overlay -->
		    <Grid x:Name="EditOverlay"
                      Background="#66000000"
                      IsHitTestVisible="True">

			<Canvas x:Name="OverlayCanvas"
                        Background="Transparent"
                        MouseDown="OverlayCanvas_MouseDown"/>

			<StackPanel TextOptions.TextFormattingMode="Display"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    IsHitTestVisible="False">

				<TextBlock Foreground="White"
                        FontSize="22"
                        FontWeight="SemiBold"
                        TextAlignment="Center"
                        Margin="0,0,0,24">
                        Simulation is paused.
                        <LineBreak/>
                        Click anywhere to edit the forest.
				</TextBlock>

				    <StackPanel HorizontalAlignment="Center">
					    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
						    <fa:ImageAwesome Icon="Fire" Width="24" Height="24" Foreground="OrangeRed" Margin="0,0,8,0"/>

						    <TextBlock Text="Left Mouse Button"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   Width="170"/>
						    <TextBlock Text="Burn trees"
                                   FontSize="16"
                                   Foreground="White"/>
					    </StackPanel>

					    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
						    <fa:ImageAwesome Icon="Leaf" Width="24" Height="24" Foreground="Green" Margin="0,0,8,0"/>

						    <TextBlock Text="Right Mouse Button"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   Width="170"/>
						    <TextBlock Text="Grow trees"
                                   FontSize="16"
                                   Foreground="White"/>
					    </StackPanel>

					    <StackPanel Orientation="Horizontal">
						    <fa:ImageAwesome Icon="TrashOutline" Width="22" Height="22"
                                    Foreground="DarkGray" Margin="1,0,8,0"/>

						    <TextBlock Text="Middle Mouse Button"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   Width="169.5"/>
						    <TextBlock Text="Destroy trees"
                                   FontSize="16"
                                   Foreground="White"/>
					    </StackPanel>
				    </StackPanel>
			    </StackPanel>

			    <Button Content="✕"
                    Width="32"
                    Height="32"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="12"
                    Style="{StaticResource CustomButtonStyle}"
                    Click="CloseOverlay_Click"/>
		    </Grid>
	    </Grid>
	</Grid>

</Window>
