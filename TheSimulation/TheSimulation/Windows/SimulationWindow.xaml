<Window x:Class="TheSimulation.SimulationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TheSimulation"
        mc:Ignorable="d"
        Title="Forest fire simulation"
        Height="700"
        Width="1000"
        ResizeMode="NoResize"
        KeyDown="Window_KeyDown">

	<Window.Resources>
		<!-- Style für Buttons -->
		<Style x:Key="CustomButtonStyle" TargetType="Button">
			<Setter Property="Background" Value="#FF4C8F94"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Padding" Value="5,0"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="HorizontalAlignment" Value="Center"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="Effect">
				<Setter.Value>
					<DropShadowEffect Color="Black" Direction="315" ShadowDepth="5" Opacity="0.3" BlurRadius="8"/>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid>

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Steuerleiste oben -->
		<StackPanel Orientation="Horizontal"
            Background="#222"
            Grid.Row="0">

			<!-- Geschwindigkeit -->
			<Button x:Name="PauseResumeButton"
                Content="❚❚"
                Margin="16,0,0,0"
                VerticalAlignment="Center"
                ToolTip="Pauses / Resumes the simulation (Space)"
                Click="PauseResume_Click" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedSlowButton"
                ToolTip="Sets the simulation speed to half the normal speed (0,5x)"
                Content="0,5"
                Click="SpeedSlow_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedNormalButton"
                ToolTip="Sets the simulation speed to normal speed (1x)"
                Content="×1"
                Click="SpeedNormal_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedFastButton"
                ToolTip="Sets the simulation speed to double the normal speed (2x)"
                Content="×2"
                Click="SpeedFast_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<Button x:Name="SpeedUltraButton"
                ToolTip="Sets the simulation speed to ultra speed (40x the normal speed)"
                Content="×40"
                Click="SpeedUltra_Click"
                Margin="2" Style="{StaticResource CustomButtonStyle}"/>

			<!-- Abstand -->
			<Rectangle Width="10"/>

			<TextBlock Text="Total Grown:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="16,0,0,0"/>
			<TextBlock x:Name="TotalGrownTrees"
               Text="0"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="5,0,0,0" MinWidth="32"/>

			<TextBlock Text="Total Burned:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="8,0,0,0"/>
			<TextBlock x:Name="TotalBurnedTrees"
               Text="0"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="5,0,0,0" MinWidth="32"/>

			<TextBlock Text="Tree-Density:"
               Foreground="White"
               VerticalAlignment="Center"
               Margin="8,0,0,0"/>
			<TextBlock x:Name="TreeDensityText"
                Text="0 / 0 (0%)"
                Foreground="White"
                VerticalAlignment="Center"
                Margin="16,0,0,0"/>

			<!-- Windstärke Anzeige -->
			<TextBlock Text="Wind Strength:"
                       Foreground="White"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0"/>
			<TextBlock x:Name="WindStrengthText"
                    Text="0% (0 Bft)"
                    Foreground="White"
                    VerticalAlignment="Center"
                    Margin="5,0,0,0" MinWidth="32"/>

			<Button x:Name="ShowEvaluationButton"
                Content="Evaluation"
                Grid.Column="2"
                IsEnabled="False"
                Margin="16,0,0,0"
                VerticalAlignment="Center"
                ToolTip="Opens a new window to show the result of this simulation"
                Click="ShowEvaluation_Click" Style="{StaticResource CustomButtonStyle}"/>
		</StackPanel>

		<!-- Canvas + Overlay -->
		<Grid Grid.Row="1">

			<!-- Main Canvas -->
			<Canvas x:Name="ForestCanvas"
                Background="Black"
                Cursor="Cross"/>

			<!-- Edit Overlay -->
			<Grid x:Name="EditOverlay"
              Background="#66000000"
              Opacity="1"
              IsHitTestVisible="True">

				<!-- Overlay -->
				<Canvas x:Name="OverlayCanvas"
                    Background="Transparent"
                    MouseDown="OverlayCanvas_MouseDown"/>

				<!-- User-Info -->
				<TextBlock
                    Foreground="White"
                    FontSize="22"
                    FontWeight="SemiBold"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    TextAlignment="Center"
                    MouseDown="TextBlock_MouseDown">
					Simulation is paused.
                    <LineBreak/>
                    Click anywhere to edit the forest.
				</TextBlock>

				<!-- Close X -->
				<Button Content="✕"
                    Width="32"
                    Height="32"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="12"
                    Style="{StaticResource CustomButtonStyle}"
                    Click="CloseOverlay_Click"/>
			</Grid>

		</Grid>

		<!-- Rechte Seite (Timer) -->
		<TextBlock x:Name="SimulationTimeText"
           Text="Runtime: 00:00:00"
           Foreground="White"
           VerticalAlignment="Center"
           HorizontalAlignment="Right"
           Margin="0,0,16,0"
           Grid.Column="1"/>

	</Grid>

</Window>
